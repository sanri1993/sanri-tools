(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af86f"],{"0f69":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-button",{staticClass:"margin-bottom",attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialog.createUser.visible=!0}}},[e._v("新建")]),s("el-table",{attrs:{data:e.users,size:"mini",border:"",stripe:"","highlight-current-row":""}},[s("el-table-column",{attrs:{type:"index",width:"55"}}),s("el-table-column",{attrs:{prop:"username",label:"用户名称",sortable:""}}),s("el-table-column",{attrs:{prop:"mainGroup",label:"主组织"}}),s("el-table-column",{attrs:{prop:"mainRole",label:"主角色"}}),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.detail(t.row.username)}}},[e._v("详情")]),s("span",{directives:[{name:"show",rawName:"v-show",value:"admin"!==t.row.username,expression:"scope.row.username !== 'admin'"}],staticClass:"margin-left"},[s("el-button",{attrs:{type:"text",size:"small",disabled:"admin"===t.row.username},on:{click:function(s){return e.delUser(t.row.username)}}},[s("span",{staticClass:"text-danger"},[e._v("删除")])])],1)]}}])})],1),s("el-dialog",{attrs:{visible:e.dialog.createUser.visible,width:"30%",title:"新建用户"},on:{"update:visible":function(t){return e.$set(e.dialog.createUser,"visible",t)}}},[s("el-form",{attrs:{model:e.dialog.createUser.user,size:"mini"}},[s("el-button",{staticClass:"margin-bottom",attrs:{type:"primary",size:"small"},on:{click:e.createUser}},[e._v("确定")]),s("el-form-item",[e._v("用户初始密码为: 0")]),s("el-form-item",[s("el-input",{attrs:{placeholder:"请输入用户名",size:"small"},model:{value:e.dialog.createUser.user.toolUser.username,callback:function(t){e.$set(e.dialog.createUser.user.toolUser,"username",t)},expression:"dialog.createUser.user.toolUser.username"}})],1),s("el-form-item",[s("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择角色列表",multiple:""},model:{value:e.dialog.createUser.user.roles,callback:function(t){e.$set(e.dialog.createUser.user,"roles",t)},expression:"dialog.createUser.user.roles"}},e._l(e.dialog.accessRoles,(function(e){return s("el-option",{key:e.key,attrs:{value:e.key,label:e.value}})})),1)],1),s("el-form-item",[s("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[s("el-tree",{ref:"groupTree",attrs:{data:e.dialog.accessGroups,"check-strictly":!0,"node-key":"path","default-expanded-keys":["/"],props:{label:"path"},"show-checkbox":""}})],1)])],1)],1)],1)},r=[],l=(s("d81d"),s("ac1f"),s("5319"),s("b0eb")),o={name:"user",data:function(){return{users:[],dialog:{createUser:{visible:!1,user:{toolUser:{username:null},roles:[],groups:[]}}}}},mounted:function(){var e=this;this.loadUsers(),l["a"].accessRoles().then((function(t){e.dialog.accessRoles=t.data.map((function(e){return{key:e.toolRole.rolename,value:e.toolRole.rolename}}))})),l["a"].accessGroups().then((function(t){e.dialog.accessGroups=[t.data]}))},methods:{loadUsers:function(){var e=this;l["a"].accessUsers().then((function(t){e.users=t.data}))},createUser:function(){var e=this;this.dialog.createUser.user.groups=this.$refs.groupTree.getCheckedKeys(),l["a"].addUser(this.dialog.createUser.user).then((function(t){e.dialog.createUser.visible=!1,e.loadUsers()}))},delUser:function(e){var t=this;l["a"].delUser(e).then((function(e){t.loadUsers()}))},detail:function(e){this.$router.replace({path:"/security/user/detail",query:{username:e}})}}},i=o,n=s("2877"),c=Object(n["a"])(i,a,r,!1,null,null,null);t["default"]=c.exports}}]);