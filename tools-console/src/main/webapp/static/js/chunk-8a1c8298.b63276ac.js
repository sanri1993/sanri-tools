(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a1c8298"],{"1b9a":function(t,e,n){"use strict";n("525c")},"3e05":function(t,e){t.exports={load(t="https://as.alipayobjects.com/g/cicada/monaco-editor-mirror/0.6.1/min",e){if(window.monaco)return void e();const n={paths:{vs:t+"/vs"}},o=n.paths.vs+"/loader.js",i=()=>{if(window.LOADER_PENDING&&window.require.config(n),window.require(["vs/editor/editor.main"],()=>{e()}),window.LOADER_PENDING){window.LOADER_PENDING=!1;const t=window.LOADER_CALLBACKS;if(t&&t.length){let e=t.shift();while(e)e.fn.call(e.window),e=t.shift()}}};if(window.LOADER_PENDING)window.LOADER_CALLBACKS=window.LOADER_CALLBACKS||[],window.LOADER_CALLBACKS.push({window:this,fn:i});else if("undefined"===typeof window.require){const t=window.document.createElement("script");t.type="text/javascript",t.src=o,t.addEventListener("load",i),window.document.body.appendChild(t),window.LOADER_PENDING=!0}else i()}}},"525c":function(t,e,n){},5902:function(t,e,n){"use strict";n.r(e);var o=n("c642"),i=n("d8a8");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var s=n("2877"),c=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=c.exports},"7dd6":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"json-container"},[n("el-input",{attrs:{type:"textarea",rows:10,placeholder:"JSON 字符串内容"},model:{value:t.jsonText,callback:function(e){t.jsonText=e},expression:"jsonText"}}),n("small",{staticClass:"text-forestgreen margin-top",staticStyle:{display:"block"}},[t._v("如果修改了上方的数据,请重新验证 JSON; 修改下方的数据会自动同步")]),n("el-button-group",{staticClass:"padding-top padding-bottom"},[n("el-button",{attrs:{plain:"",size:"small",icon:"el-icon-bottom"},on:{click:t.checkJSON}},[t._v("验证 JSON ")]),n("el-button",{attrs:{plain:"",size:"small",icon:"el-icon-bottom"},on:{click:t.innerJSON}},[t._v("innerJSON")])],1),n("vue-json-editor",{ref:"editor",staticClass:"editor-wrapper",style:"height:"+t.editorHeight+"px",attrs:{"expanded-on-start":!0,"show-btns":!1,lang:"zh"},on:{"json-change":t.changeJson},model:{value:t.jsonObj,callback:function(e){t.jsonObj=e},expression:"jsonObj"}})],1)},i=[],a=(n("e9c4"),n("45a3")),s={name:"Index",components:{vueJsonEditor:a["a"]},props:{json:{type:[Object,Array]}},data:function(){return{jsonText:null,jsonObj:null}},computed:{editorHeight:function(){return document.body.clientHeight-280}},watch:{json:function(t){this.jsonText=JSON.stringify(t),this.jsonObj=t}},mounted:function(){this.jsonText=JSON.stringify(this.json),this.jsonObj=this.json},methods:{innerJSON:function(){if(this.jsonObj.constructor===Array){for(var t=[],e=0;e<this.jsonObj.length;e++)t.push(JSON.parse(this.jsonObj[e]));this.jsonObj=t,this.jsonText=JSON.stringify(this.jsonObj)}},changeJson:function(t){this.jsonText=JSON.stringify(t),this.jsonObj=t,this.$emit("change",this.jsonObj)},checkJSON:function(){try{this.jsonObj=JSON.parse(this.jsonText),this.$emit("change",this.jsonObj)}catch(t){this.$message({type:"error",message:"JSON 验证失败 "+t})}}}},c=s,l=(n("1b9a"),n("2877")),r=Object(l["a"])(c,o,i,!1,null,"bd7e82d0",null);e["a"]=r.exports},b076:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-alert",{staticClass:"margin-bottom",attrs:{type:"success",closable:!1}},[n("template",{slot:"title"},[t._v(" 如果需要使用 ssh 认证, 请 "),n("el-button",{attrs:{type:"text"},on:{click:t.downloadPublicKey}},[t._v("下载 publicKey")]),t._v(" 并传到对应应用 ")],1)],2),n("el-row",[n("el-col",{attrs:{span:5}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.modules,border:"",stripe:"","highlight-current-row":"",size:"mini"}},[n("el-table-column",{attrs:{prop:"name",label:"模块"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.loadModuleConnects(e.row.name)}}},[t._v("查看连接")])]}}])})],1)],1),n("el-col",{staticClass:"margin-left",attrs:{span:18}},[n("el-button",{staticClass:"margin-bottom",attrs:{size:"small",type:"primary"},on:{click:t.preCreateConnect}},[t._v("新建 "+t._s(t.choseModule)+" 连接")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.moduleConnects,border:"",stripe:"",size:"mini"}},[n("el-table-column",{attrs:{type:"index",width:"55"}}),n("el-table-column",{attrs:{prop:"connectInput.baseName",label:"基础名",width:"150",sortable:""}}),n("el-table-column",{attrs:{prop:"path",label:"路径",width:"210"}}),n("el-table-column",{attrs:{prop:"connectInput.configTypeName",label:"配置格式",width:"70"}}),n("el-table-column",{attrs:{prop:"lastUpdateTime",label:"最后更新时间",width:"180"}}),n("el-table-column",{attrs:{prop:"lastAccessTime",label:"最后访问时间",width:"180"}}),n("el-table-column",{attrs:{prop:"lastUpdateUser",label:"更新人"}}),n("el-table-column",{attrs:{prop:"connectInput.group",label:"组织"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.readConnect(e.row.connectInput)}}},[t._v("详情")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.delConnects(e.row.connectInput.baseName)}}},[t._v("删除")])]}}])})],1)],1)],1),n("el-dialog",{attrs:{visible:t.dialog.add.visible,title:t.dialog.add.title},on:{"update:visible":function(e){return t.$set(t.dialog.add,"visible",e)}}},[n("el-form",{ref:"addConnectForm",attrs:{size:"mini","label-position":"right","label-width":"120px",model:t.dialog.add.connectInput,rules:t.dialog.add.rules}},[n("el-form-item",{attrs:{label:"模块名",prop:"module"}},[n("el-input",{attrs:{placeholder:"模块名",readonly:"",size:"small"},model:{value:t.dialog.add.connectInput.module,callback:function(e){t.$set(t.dialog.add.connectInput,"module",e)},expression:"dialog.add.connectInput.module"}})],1),n("el-form-item",{attrs:{label:"基础名",prop:"baseName"}},[n("el-input",{attrs:{placeholder:"基础名",size:"small"},model:{value:t.dialog.add.connectInput.baseName,callback:function(e){t.$set(t.dialog.add.connectInput,"baseName",e)},expression:"dialog.add.connectInput.baseName"}})],1),n("el-form-item",{attrs:{label:"配置文件格式",prop:"configTypeName"}},[n("el-input",{attrs:{placeholder:"配置文件格式",readonly:"",size:"small"},model:{value:t.dialog.add.connectInput.configTypeName,callback:function(e){t.$set(t.dialog.add.connectInput,"configTypeName",e)},expression:"dialog.add.connectInput.configTypeName"}})],1),n("el-row",[n("el-col",{attrs:{span:7}},[t.dialog.add.accessGroups?n("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[n("el-tree",{ref:"groupTree",attrs:{data:t.dialog.add.accessGroups,"check-strictly":!0,"node-key":"path","default-expanded-keys":["/"],props:{label:"path"},"show-checkbox":""}})],1):t._e()]),n("el-col",{attrs:{span:16}},[n("monaco-editor",{key:t.dialog.add.randomkey,attrs:{height:"300",language:t.dialog.add.connectInput.configTypeName,code:t.dialog.add.connectInput.content},on:{mounted:t.editorMounted,codeChange:t.onCodeChange}})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"margin-bottom",attrs:{type:"primary",size:"small"},on:{click:t.writeConfig}},[t._v("确定")])],1)],1),n("el-dialog",{attrs:{visible:t.dialog.editcontent.visible,width:"80%",title:t.dialog.editcontent.title},on:{"update:visible":function(e){return t.$set(t.dialog.editcontent,"visible",e)}}},[n("monaco-editor",{key:"edit",attrs:{height:"400",language:t.dialog.editcontent.connectInput.configTypeName,code:t.dialog.editcontent.content},on:{mounted:t.modifyEditorMounted,codeChange:t.modifyEditorCodeChange}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"margin-bottom margin-left",attrs:{type:"primary",size:"small"},on:{click:t.updateContent}},[t._v("保存")])],1)],1)],1)},i=[],a=n("5530"),s=(n("d81d"),n("b0c0"),n("b1a9")),c=n("b0eb"),l=n("7dd6"),r=n("dba0"),d=n.n(r),u=n("2f62"),f={name:"connect",components:{JsonEditor:l["a"],MonacoEditor:d.a},data:function(){return{modules:[],choseModule:null,moduleConnects:[],dialog:{add:{title:"新建连接",visible:!1,editor:null,randomkey:1,connectInput:{module:null,baseName:null,configTypeName:null,group:null,content:null},accessGroups:[],rules:{module:[{required:!0,message:"模块名必填",trigger:"blur"}],baseName:[{required:!0,message:"基础名必填",trigger:"blur"}],configTypeName:[{required:!0,message:"配置类型必填",trigger:"blur"}]}},editcontent:{title:"编辑连接内容",editor:null,visible:!1,content:null,connectInput:{}}}}},mounted:function(){this.loadModules()},methods:{downloadPublicKey:function(){s["a"].downloadPublicKey()},editorMounted:function(t){this.dialog.add.editor=t},modifyEditorMounted:function(t){this.dialog.editcontent.editor=t},onCodeChange:function(t){this.dialog.add.connectInput.content=t.getValue()},modifyEditorCodeChange:function(t){this.dialog.editcontent.content=t.getValue()},delConnects:function(t){var e=this;s["a"].security.delConnect(this.choseModule,t).then((function(t){e.loadModuleConnects(e.choseModule)}))},loadModules:function(){var t=this;s["a"].security.modules().then((function(e){t.modules=e.data.map((function(t){return{name:t}})),t.modules&&t.modules.length>0&&(t.choseModule||t.loadModuleConnects(t.modules[0].name))}))},loadModuleConnects:function(t){var e=this;this.choseModule=t,s["a"].security.moduleConnects(t).then((function(t){e.moduleConnects=t.data}))},readConnect:function(t){var e=this;this.dialog.editcontent.title="编辑 "+this.choseModule+" [ "+t.baseName+" ]  连接内容",s["a"].security.loadContent(this.choseModule,t.baseName).then((function(n){e.dialog.editcontent.connectInput=t,e.dialog.editcontent.content=n.data,e.dialog.editcontent.visible=!0;var o=e;setTimeout((function(){o.dialog.editcontent.editor.setValue(n.data)}),200)}))},preCreateConnect:function(){var t=this;this.dialog.add.connectInput.module=this.choseModule,this.dialog.add.visible=!0,this.dialog.add.title="新建 "+this.choseModule+" 连接",this.needSecurity?c["a"].accessGroups().then((function(e){t.dialog.add.accessGroups=[e.data]})):this.dialog.add.accessGroups=[{path:"/",children:[]}],s["a"].security.connectTemplate(this.choseModule).then((function(e){t.dialog.add.connectInput.configTypeName=e.data.configTypeName,t.dialog.add.connectInput.content=e.data.content,t.dialog.add.randomkey=Math.floor(0xe8d4a54019*Math.random())}))},writeConfig:function(){var t=this;this.$refs["addConnectForm"].validate((function(e){if(!e)return!1;var n=t.$refs.groupTree.getCheckedKeys();0!==n.length?n.length>1?t.$confirm("只能选择一个节点做为连接分组,现将使用 "+n[0]+" 做为分组, 确定?","警告",{type:"warning"}).then((function(){t.dialog.add.connectInput.group=n[0],s["a"].security.writeConfig(t.dialog.add.connectInput).then((function(e){t.loadModuleConnects(t.choseModule),t.dialog.add.visible=!1}))})).catch((function(){})):(t.dialog.add.connectInput.group=n[0],s["a"].security.writeConfig(t.dialog.add.connectInput).then((function(e){t.loadModuleConnects(t.choseModule),t.dialog.add.visible=!1}))):t.$message("需要选择一个组织节点做为连接的组织以方便权限过滤")}))},updateContent:function(){var t=this,e=Object.assign(this.dialog.editcontent.connectInput,{content:this.dialog.editcontent.content});s["a"].security.writeConfig(e).then((function(e){t.loadModuleConnects(t.choseModule),t.dialog.editcontent.visible=!1}))}},computed:Object(a["a"])({},Object(u["b"])(["needSecurity"]))},h=f,p=n("2877"),g=Object(p["a"])(h,o,i,!1,null,"2c8b239a",null);e["default"]=g.exports},c642:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.style})},i=[]},d8a8:function(t,e,n){"use strict";n.r(e);var o=n("e860"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},dba0:function(t,e,n){var o=n("5902");t.exports=o},e860:function(t,e,n){n("a9e3"),n("d3b7"),n("25f0"),n("159b");var o=n("f7fe"),i=n("3e05");t.exports={props:{width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"100%"},code:{type:String,default:"// code \n"},srcPath:{type:String},language:{type:String,default:"javascript"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:function(){}},highlighted:{type:Array,default:function(){return[{number:0,class:""}]}},changeThrottle:{type:Number,default:0}},mounted:function(){this.fetchEditor()},destroyed:function(){this.destroyMonaco()},computed:{style:function(){var t=this.width,e=this.height,n=-1!==t.toString().indexOf("%")?t:"".concat(t,"px"),o=-1!==e.toString().indexOf("%")?e:"".concat(e,"px");return{width:n,height:o}},editorOptions:function(){return Object.assign({},this.defaults,this.options,{value:this.code,language:this.language,theme:this.theme})}},data:function(){return{defaults:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1,glyphMargin:!0}}},watch:{highlighted:{handler:function(t){this.highlightLines(t)},deep:!0}},methods:{highlightLines:function(t){var e=this;this.editor&&t.forEach((function(t){var n=t.class,o=e.$el.querySelector(".".concat(n));o&&o.classList.remove(n);var i=parseInt(t.number);if(!(!e.editor&&i<1||isNaN(i))){var a=e.$el.querySelector('.view-lines [linenumber="'.concat(i,'"]'));a&&a.classList.add(n)}}))},editorHasLoaded:function(t,e){var n=this;this.editor=t,this.monaco=e,this.editor.onDidChangeModelContent((function(e){return n.codeChangeHandler(t,e)})),this.$emit("mounted",t)},codeChangeHandler:function(t){this.codeChangeEmitter||(this.codeChangeEmitter=o((function(t){this.$emit("codeChange",t)}),this.changeThrottle)),this.codeChangeEmitter(t)},fetchEditor:function(){i.load(this.srcPath,this.createMonaco)},createMonaco:function(){this.editor=window.monaco.editor.create(this.$el,this.editorOptions),this.editorHasLoaded(this.editor,window.monaco)},destroyMonaco:function(){"undefined"!==typeof this.editor&&this.editor.dispose()}}}},e9c4:function(t,e,n){var o=n("23e7"),i=n("d066"),a=n("d039"),s=i("JSON","stringify"),c=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,r=/^[\uDC00-\uDFFF]$/,d=function(t,e,n){var o=n.charAt(e-1),i=n.charAt(e+1);return l.test(t)&&!r.test(i)||r.test(t)&&!l.test(o)?"\\u"+t.charCodeAt(0).toString(16):t},u=a((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&o({target:"JSON",stat:!0,forced:u},{stringify:function(t,e,n){var o=s.apply(null,arguments);return"string"==typeof o?o.replace(c,d):o}})},f7fe:function(t,e,n){(function(e){var n="Expected a function",o=NaN,i="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,r=parseInt,d="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,f=d||u||Function("return this")(),h=Object.prototype,p=h.toString,g=Math.max,m=Math.min,b=function(){return f.Date.now()};function y(t,e,o){var i,a,s,c,l,r,d=0,u=!1,f=!1,h=!0;if("function"!=typeof t)throw new TypeError(n);function p(e){var n=i,o=a;return i=a=void 0,d=e,c=t.apply(o,n),c}function y(t){return d=t,l=setTimeout(O,e),u?p(t):c}function w(t){var n=t-r,o=t-d,i=e-n;return f?m(i,s-o):i}function C(t){var n=t-r,o=t-d;return void 0===r||n>=e||n<0||f&&o>=s}function O(){var t=b();if(C(t))return N(t);l=setTimeout(O,w(t))}function N(t){return l=void 0,h&&i?p(t):(i=a=void 0,c)}function x(){void 0!==l&&clearTimeout(l),d=0,i=r=a=l=void 0}function S(){return void 0===l?c:N(b())}function I(){var t=b(),n=C(t);if(i=arguments,a=this,r=t,n){if(void 0===l)return y(r);if(f)return l=setTimeout(O,e),p(r)}return void 0===l&&(l=setTimeout(O,e)),c}return e=j(e)||0,v(o)&&(u=!!o.leading,f="maxWait"in o,s=f?g(j(o.maxWait)||0,e):s,h="trailing"in o?!!o.trailing:h),I.cancel=x,I.flush=S,I}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function w(t){return!!t&&"object"==typeof t}function C(t){return"symbol"==typeof t||w(t)&&p.call(t)==i}function j(t){if("number"==typeof t)return t;if(C(t))return o;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=c.test(t);return n||l.test(t)?r(t.slice(2),n?2:8):s.test(t)?o:+t}t.exports=y}).call(this,n("c8ba"))}}]);