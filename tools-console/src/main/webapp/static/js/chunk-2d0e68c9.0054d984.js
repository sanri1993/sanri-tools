(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e68c9"],{"98e9":function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"app-container"},[t("el-row",[t("el-descriptions",{attrs:{title:"用户基本信息",direction:"vertical",column:4,border:""}},[t("el-descriptions-item",{attrs:{label:"用户名"}},[e._v(e._s(e.user.username))]),t("el-descriptions-item",{attrs:{label:"角色列表"}},["admin"===e.username?e._l(e.user.roles,(function(s){return t("el-tag",{key:s,staticClass:"margin-left margin-top",attrs:{size:"small"}},[e._v(e._s(s))])})):e._l(e.user.roles,(function(s){return t("el-tag",{key:s,staticClass:"margin-left margin-top",attrs:{closable:"",size:"small"},on:{close:function(t){return e.delRole(s)}}},[e._v(e._s(s))])}))],2),t("el-descriptions-item",{attrs:{label:"组织列表"}},["admin"===e.username?e._l(e.user.groups,(function(s){return t("el-tag",{key:s,staticClass:"margin-left margin-top",attrs:{size:"small"}},[e._v(e._s(s))])})):e._l(e.user.groups,(function(s){return t("el-tag",{key:s,staticClass:"margin-left margin-top",attrs:{closable:"",size:"small"},on:{click:function(t){return e.delGroup(s)}}},[e._v(e._s(s))])}))],2)],1)],1),t("el-row",{},[t("el-col",{attrs:{span:11}},[t("div",{staticClass:"margin-bottom margin-top"},[t("b",[e._v("可访问用户列表")])]),t("el-table",{attrs:{data:e.accessUsers,size:"mini",border:"",stripe:"",height:"300","highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",width:"55"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名称",sortable:""}})],1)],1),t("el-col",{attrs:{span:11}},[t("div",{staticClass:"margin-bottom margin-top"},[t("b",[e._v("可访问角色列表")])]),t("el-table",{attrs:{data:e.accessRoles,size:"mini",border:"",stripe:"",height:"300","highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",width:"55"}}),t("el-table-column",{attrs:{prop:"toolRole.rolename",label:"角色名称",sortable:""}})],1)],1)],1),t("el-row",{staticClass:"margin-top"},[t("el-col",{attrs:{span:11}},[t("div",{staticClass:"margin-bottom margin-top"},[t("b",[e._v("可访问组织")])]),t("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[t("el-tree",{ref:"accessGroupTree",attrs:{data:e.accessGroups,"node-key":"path","default-expanded-keys":["/"],props:{label:"path"}}})],1)]),t("el-col",{staticClass:"margin-left",attrs:{span:11}},[t("div",{staticClass:"margin-bottom margin-top"},[t("b",[e._v("可访问资源")])]),t("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[t("el-tree",{ref:"accessResourceTree",attrs:{data:e.accessResources,"node-key":"id"}})],1)])],1)],1)},a=[],l=(t("a434"),t("a15b"),t("b0eb")),n={name:"user_detail",data:function(){return{username:null,accessGroups:[],accessRoles:[],accessUsers:[],accessResources:[],user:{toolUser:{}},userExtend:{grantRoles:[],grantGroups:[]}}},mounted:function(){var e=this;this.username=this.$route.query.username,l["a"].queryUser(this.username).then((function(s){e.user=s.data})),this.reloadUserAccess()},methods:{delRole:function(e){var s=this;this.user.roles.splice(this.user.roles.indexOf(e),1),l["a"].userGrantRoles(this.username,this.user.roles.join(",")).then((function(e){s.reloadUserAccess()}))},delGroup:function(e){var s=this;this.user.groups.splice(this.user.groups.indexOf(e),1),l["a"].userGrantGroups(this.username,this.user.groups.join(",")).then((function(e){s.reloadUserAccess()}))},reloadUserAccess:function(){var e=this;l["a"].queryUserAccessRoles(this.username).then((function(s){e.accessRoles=s.data})),l["a"].queryUserAccessGroups(this.username).then((function(s){e.accessGroups=[s.data]})),l["a"].queryUserAccessUsers(this.username).then((function(s){e.accessUsers=s.data})),l["a"].queryUserAccessResources(this.username).then((function(s){e.accessResources=s.data}))}}},i=n,o=t("2877"),c=Object(o["a"])(i,r,a,!1,null,null,null);s["default"]=c.exports}}]);