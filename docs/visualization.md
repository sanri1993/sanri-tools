## 背景 

在日常开发中，我们会使用各种各样的中间件，常见的比如 Redis，Kafka，RocketMq 等，都是需要把数据序列化后进行存储的，但是我们没有什么好的工具可以直接拿到里面存储的数据，像 Redis 的工具: redis-cli，RDM，取出来数据都是一堆乱码，无法直观的查看，所以我便开发出这么一套工具用来将数据可视化，目前提供数据可视化的工具有 

* Redis 工具
* Kafka 工具

## 原理

利用相应的序列化工具，将字节码根据对应的 java 实体类进行反序列化成 java 对象，然后再使用 json 序列化到前端进行展示。所以要做的工作主要是采集数据和反序列化工作，采集数据需要熟悉中间件的数据获取 api ， 反序列化工作交给了类加载器和序列化工具。

### 类加载器

在 java 中，我们可以自定义自己的类加载器，每个类加载器加载的类可以相互独立开来，并且我可以利用父级类加载器来解决一些基本类型的类加载。

对于用户项目中的类字节码如何获取的问题，我提供了 3 种方案，本功能在 【基础数据】->【类加载器管理】中，操作简单，不再提供说明。

1. 直接上传单个 class 文件
2. 上传一个压缩包，包含所有需要的 class 文件
3. 直接使用 pom.xml 文件来下载 jar 包，这很方便，也很酷

### 类加载器的存储结构 

由于 java 类加载器的原理限制，我需要按照类的包路径将类放到指定的位置，所以上传的单个类我需要读取字节码并获取包名，然后将类放在指定文件夹中，然后进行类路径加载。所以存储结构看起来像这样子

```
$dataDir[Dir]
  classloaders[Dir]
    $classloadName[Dir]
      jars[Dir]   所有的 jar 文件
        xx.jar
        commons.jar
      classes[Dir]       这里放零散的类
        com/sanri/xx.class  多级目录
        com/sanri/domain/xx.class
    $secondClassloaderName[Dir]
```


### 序列化工具

目前支持的序列化工具有 jdk，hex，json，hessian，kryo，string，doublejdk